var pr=e=>{throw TypeError(e)};var xt=(e,t,r)=>t.has(e)||pr("Cannot "+r);var at=(e,t,r)=>(xt(e,t,"read from private field"),r?r.call(e):t.get(e)),wt=(e,t,r)=>t.has(e)?pr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),br=(e,t,r,o)=>(xt(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r),ot=(e,t,r)=>(xt(e,t,"access private method"),r);import"../chunks/CWj6FrbW.js";import"../chunks/DkMhb5CK.js";import{l as Ir,b as xa,d as Ge,w as $,c as vt,e as Dt,s as te,f as dt,i as Nr,o as Rr}from"../chunks/BWLedeC4.js";import{z as Et,i as ne,ag as wa,B as Or,j as Ea,w as Sa,g as u,S as Ta,x as Ca,H as Aa,y as mr,A as St,J as Ve,ah as Ia,al as Na,C as kt,F as Ra,aC as ut,aD as ft,D as Re,aE as kr,ap as Kr,ae as Lr,N as Kt,aF as _r,aG as gr,G as Pr,I as Oa,aH as Tt,a5 as ka,aI as Mr,aJ as Ka,aK as La,aj as Pa,aL as Ma,ao as Ua,aM as za,W as Da,a3 as Ga,aN as Va,aO as Ba,K as Ha,aP as Fa,aQ as Ya,aR as $a,aS as ja,aT as qa,aU as Qa,b as it,a4 as Xa,aV as Ja,p as Oe,aW as Wa,q as d,s,t as F,a9 as we,m as P,o as ke,n as D,v as _,T as hr,O as Z,a7 as He,aX as Za,aY as eo,k as Ur,l as Lt,aZ as to,a_ as yr,a$ as nt}from"../chunks/CYKBLotR.js";import{p as ro,i as ee,s as zr,a as V,b as j}from"../chunks/CHPe_Vsy.js";import{i as Dr}from"../chunks/DlH_KJJL.js";function ct(e,t){return t}function ao(e,t,r){for(var o=e.items,a=[],n=t.length,i=0;i<n;i++)Ma(t[i].e,a,!0);var l=n>0&&a.length===0&&r!==null;if(l){var m=r.parentNode;Ua(m),m.append(r),o.clear(),de(e,t[0].prev,t[n-1].next)}za(a,()=>{for(var y=0;y<n;y++){var E=t[y];l||(o.delete(E.k),de(e,E.prev,E.next)),Mr(E.e,!l)}})}function Fe(e,t,r,o,a,n=null){var i=e,l={flags:t,items:new Map,first:null},m=(t&kr)!==0;if(m){var y=e;i=ne?Et(wa(y)):y.appendChild(Or())}ne&&Ea();var E=null,C=!1,A=new Map,K=Ta(()=>{var v=r();return Lr(v)?v:v==null?[]:Kr(v)}),g,c;function f(){oo(c,g,l,A,i,a,t,o,r),n!==null&&(g.length===0?E?Pr(E):E=kt(()=>n(i)):E!==null&&Oa(E,()=>{E=null}))}Sa(()=>{c??(c=Da),g=u(K);var v=g.length;if(C&&v===0)return;C=v===0;let b=!1;if(ne){var S=Ca(i)===Aa;S!==(v===0)&&(i=mr(),Et(i),St(!1),b=!0)}if(ne){for(var T=null,x,p=0;p<v;p++){if(Ve.nodeType===Ia&&Ve.data===Na){i=Ve,b=!0,St(!1);break}var h=g[p],k=o(h,p);x=Pt(Ve,l,T,null,h,k,p,a,t,r),l.items.set(k,x),T=x}v>0&&Et(mr())}if(ne)v===0&&n&&(E=kt(()=>n(i)));else if(Ra()){var z=new Set,se=Re;for(p=0;p<v;p+=1){h=g[p],k=o(h,p);var q=l.items.get(k)??A.get(k);q?t&(ut|ft)&&Gr(q,h,p,t):(x=Pt(null,l,null,null,h,k,p,a,t,r,!0),A.set(k,x)),z.add(k)}for(const[G,re]of l.items)z.has(G)||se.skipped_effects.add(re.e);se.add_callback(f)}else f();b&&St(!0),u(K)}),ne&&(i=Ve)}function oo(e,t,r,o,a,n,i,l,m){var Ce,_e,ve,ue;var y=(i&La)!==0,E=(i&(ut|ft))!==0,C=t.length,A=r.items,K=r.first,g=K,c,f=null,v,b=[],S=[],T,x,p,h;if(y)for(h=0;h<C;h+=1)T=t[h],x=l(T,h),p=A.get(x),p!==void 0&&((Ce=p.a)==null||Ce.measure(),(v??(v=new Set)).add(p));for(h=0;h<C;h+=1){if(T=t[h],x=l(T,h),p=A.get(x),p===void 0){var k=o.get(x);if(k!==void 0){o.delete(x),A.set(x,k);var z=f?f.next:g;de(r,f,k),de(r,k,z),Ct(k,z,a),f=k}else{var se=g?g.e.nodes_start:a;f=Pt(se,r,f,f===null?r.first:f.next,T,x,h,n,i,m)}A.set(x,f),b=[],S=[],g=f.next;continue}if(E&&Gr(p,T,h,i),p.e.f&Tt&&(Pr(p.e),y&&((_e=p.a)==null||_e.unfix(),(v??(v=new Set)).delete(p))),p!==g){if(c!==void 0&&c.has(p)){if(b.length<S.length){var q=S[0],G;f=q.prev;var re=b[0],I=b[b.length-1];for(G=0;G<b.length;G+=1)Ct(b[G],q,a);for(G=0;G<S.length;G+=1)c.delete(S[G]);de(r,re.prev,I.next),de(r,f,re),de(r,I,q),g=q,f=I,h-=1,b=[],S=[]}else c.delete(p),Ct(p,g,a),de(r,p.prev,p.next),de(r,p,f===null?r.first:f.next),de(r,f,p),f=p;continue}for(b=[],S=[];g!==null&&g.k!==x;)g.e.f&Tt||(c??(c=new Set)).add(g),S.push(g),g=g.next;if(g===null)continue;p=g}b.push(p),f=p,g=p.next}if(g!==null||c!==void 0){for(var M=c===void 0?[]:Kr(c);g!==null;)g.e.f&Tt||M.push(g),g=g.next;var Q=M.length;if(Q>0){var X=i&kr&&C===0?a:null;if(y){for(h=0;h<Q;h+=1)(ve=M[h].a)==null||ve.measure();for(h=0;h<Q;h+=1)(ue=M[h].a)==null||ue.fix()}ao(r,M,X)}}y&&ka(()=>{var fe;if(v!==void 0)for(p of v)(fe=p.a)==null||fe.apply()}),e.first=r.first&&r.first.e,e.last=f&&f.e;for(var Ke of o.values())Mr(Ke.e);o.clear()}function Gr(e,t,r,o){o&ut&&gr(e.v,t),o&ft?gr(e.i,r):e.i=r}function Pt(e,t,r,o,a,n,i,l,m,y,E){var C=(m&ut)!==0,A=(m&Ka)===0,K=C?A?Kt(a,!1,!1):_r(a):a,g=m&ft?_r(i):i,c={i:g,v:K,k:n,a:null,e:null,prev:r,next:o};try{if(e===null){var f=document.createDocumentFragment();f.append(e=Or())}return c.e=kt(()=>l(e,K,g,y),ne),c.e.prev=r&&r.e,c.e.next=o&&o.e,r===null?E||(t.first=c):(r.next=c,r.e.next=c.e),o!==null&&(o.prev=c,o.e.prev=c.e),c}finally{}}function Ct(e,t,r){for(var o=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,n=e.e.nodes_start;n!==null&&n!==o;){var i=Pa(n);a.before(n),n=i}}function de(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Vr(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Vr(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function no(){for(var e,t,r=0,o="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Vr(e))&&(o&&(o+=" "),o+=t);return o}function io(e){return typeof e=="object"?no(e):e??""}const xr=[...` 	
\r\fÂ \v\uFEFF`];function so(e,t,r){var o=e==null?"":""+e;if(t&&(o=o?o+" "+t:t),r){for(var a in r)if(r[a])o=o?o+" "+a:a;else if(o.length)for(var n=a.length,i=0;(i=o.indexOf(a,i))>=0;){var l=i+n;(i===0||xr.includes(o[i-1]))&&(l===o.length||xr.includes(o[l]))?o=(i===0?"":o.substring(0,i))+o.substring(l+1):i=l}}return o===""?null:o}function B(e,t,r,o,a,n){var i=e.__className;if(ne||i!==r||i===void 0){var l=so(r,o,n);(!ne||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):t?e.className=l:e.setAttribute("class",l)),e.__className=r}else if(n&&a!==n)for(var m in n){var y=!!n[m];(a==null||y!==!!a[m])&&e.classList.toggle(m,y)}return n}function Br(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Lr(t))return Va();for(var o of e.options)o.selected=t.includes(Ye(o));return}for(o of e.options){var a=Ye(o);if(Ba(a,t)){o.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function lo(e){var t=new MutationObserver(()=>{Br(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ha(()=>{t.disconnect()})}function Mt(e,t,r=t){var o=!0;Ir(e,"change",a=>{var n=a?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(n),Ye);else{var l=e.querySelector(n)??e.querySelector("option:not([disabled])");i=l&&Ye(l)}r(i)}),Ga(()=>{var a=t();if(Br(e,a,o),o&&a===void 0){var n=e.querySelector(":checked");n!==null&&(a=Ye(n),r(a))}e.__value=a,o=!1}),lo(e)}function Ye(e){return"__value"in e?e.__value:e.value}const co=Symbol("is custom element"),vo=Symbol("is html");function st(e){if(ne){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;L(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var a=e.checked;L(e,"checked",null),e.checked=a}}};e.__on_r=r,ja(r),xa()}}function L(e,t,r,o){var a=uo(e);ne&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="loading"&&(e[Fa]=r),r==null?e.removeAttribute(t):typeof r!="string"&&fo(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function uo(e){return e.__attributes??(e.__attributes={[co]:e.nodeName.includes("-"),[vo]:e.namespaceURI===Ya})}var wr=new Map;function fo(e){var t=wr.get(e.nodeName);if(t)return t;wr.set(e.nodeName,t=[]);for(var r,o=e,a=Element.prototype;a!==o;){r=qa(o);for(var n in r)r[n].set&&t.push(n);o=$a(o)}return t}function lt(e,t,r=t){var o=Qa(),a=new WeakSet;Ir(e,"input",n=>{var i=n?e.defaultValue:e.value;if(i=At(e)?It(i):i,r(i),Re!==null&&a.add(Re),o&&i!==(i=t())){var l=e.selectionStart,m=e.selectionEnd;e.value=i??"",m!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(m,e.value.length))}}),(ne&&e.defaultValue!==e.value||it(t)==null&&e.value)&&(r(At(e)?It(e.value):e.value),Re!==null&&a.add(Re)),Xa(()=>{var n=t();if(e===document.activeElement){var i=Ja??Re;if(a.has(i))return}At(e)&&n===It(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function At(e){var t=e.type;return t==="number"||t==="range"}function It(e){return e===""?null:+e}const po={production:{baseURL:"/api",timeout:1e4}},Nt=po.production,Ee={JSON:"application/json",TEXT:"text/plain",WIREGUARD:"application/x-wireguard-config",IMAGE:"image/"},bo={[Ee.JSON]:e=>e.json(),[Ee.TEXT]:e=>e.text(),[Ee.WIREGUARD]:e=>e.blob(),[Ee.IMAGE]:e=>e.blob()};async function Be(e,t={}){var a;const r=new AbortController,o=setTimeout(()=>r.abort(),Nt.timeout);try{const n=await fetch(`${Nt.baseURL}${e}`,{...t,headers:{"Content-Type":Ee.JSON,...t.headers},signal:r.signal});if(!n.ok){const m=new Error(`HTTP error status: ${n.status}`);m.status=n.status;try{m.data=await n.json()}catch{try{m.data=await n.text()}catch{m.data="Could not parse error response."}}throw m}const i=n.headers.get("content-type")||"";return(((a=Object.entries(bo).find(([m])=>i.includes(m)))==null?void 0:a[1])||(m=>m.text()))(n)}catch(n){throw n.name==="AbortError"?new Error(`Request timeout after ${Nt.timeout}ms`):n}finally{clearTimeout(o)}}const je={getServers:()=>Be("/servers"),generateKey:e=>Be("/key",{method:"POST",body:JSON.stringify({token:e})}),generateConfig:e=>Be("/config",{method:"POST",body:JSON.stringify(e)}),downloadConfig:e=>Be("/config/download",{method:"POST",body:JSON.stringify(e),headers:{Accept:Ee.WIREGUARD}}),generateQR:e=>Be("/config/qr",{method:"POST",body:JSON.stringify(e),headers:{Accept:Ee.IMAGE}})},ce={WORD_NUMBER:/^([a-z]+)(\d+)?$/i,SERVER_NAME:/[\/\\:*?"<>|#]/g,MULTIPLE_UNDERSCORES:/_+/g,EDGE_UNDERSCORES:/^_|_$/g,IPV4:/^(\d{1,3}\.){3}\d{1,3}$/,PRIVATE_KEY:/^[A-Za-z0-9+/]{43}=$/,TOKEN:/^[a-f0-9]{64}$/i,NON_HEX:/[^a-f0-9]/g},$e=e=>e?e.split("_").map(t=>{const r=t.match(ce.WORD_NUMBER);if(!r)return t.charAt(0).toUpperCase()+t.slice(1);const[,o,a]=r;return o.charAt(0).toUpperCase()+o.slice(1)+(a?` ${a}`:"")}).join(" "):"",Er=e=>e.toLowerCase().replace(ce.SERVER_NAME,"_").replace(ce.MULTIPLE_UNDERSCORES,"_").replace(ce.EDGE_UNDERSCORES,"");function mo(e,t){let r;return(...o)=>{clearTimeout(r),r=window.setTimeout(()=>e(...o),t)}}const H={PRIVATE_KEY:{REGEX:ce.PRIVATE_KEY,ERROR:"Invalid private key format",validate:e=>!e||ce.PRIVATE_KEY.test(e)},DNS:{ERROR:"Invalid IPv4 address",validate:e=>e?e.split(",").every(t=>{const r=t.trim();return ce.IPV4.test(r)&&r.split(".").every(o=>{const a=parseInt(o,10);return a>=0&&a<=255})}):!0},KEEPALIVE:{MIN:15,MAX:120,ERROR:"Must be between 15 and 120",validate:e=>{if(e==null||e==="")return!0;const t=Number(e);return!isNaN(t)&&t>=H.KEEPALIVE.MIN&&t<=H.KEEPALIVE.MAX}},TOKEN:{REGEX:ce.TOKEN,ERROR:"Token must be 64 hexadecimal characters.",validate:e=>!e||ce.TOKEN.test(e),sanitize:e=>e?e.toLowerCase().replace(ce.NON_HEX,"").slice(0,64):""}},Ne=100,Sr={load:(e,t)=>e.load-t.load,name:(e,t)=>e.displayName.localeCompare(t.displayName)},_o=(e,t,r)=>({...e,country:t,city:r,displayName:$e(e.name),displayCountry:$e(t),displayCity:$e(r)});function go(){const e=$([]),t=$(!1),r=$("name"),o=$("asc"),a=$(""),n=$(""),i=$(Ne),l=Ge(e,c=>[...new Set(c.map(f=>f.country))].sort()),m=Ge([e,a],([c,f])=>f?[...new Set(c.filter(v=>v.country===f).map(v=>v.city))].sort():[]),y=Ge([e,a,n,r,o],([c,f,v,b,S])=>{const T=c.filter(h=>(!f||h.country===f)&&(!v||h.city===v)),x=Sr[b]||Sr.name,p=S==="asc"?1:-1;return T.sort((h,k)=>x(h,k)*p)}),E=Ge(y,c=>c.length),C=Ge([y,i],([c,f])=>c.slice(0,f));function A(){let c=!1;t.subscribe(f=>c=f)(),!c&&i.update(f=>f+Ne)}function K(c){let f="";r.subscribe(v=>f=v)(),f===c?o.update(v=>v==="asc"?"desc":"asc"):(r.set(c),o.set("asc")),i.set(Ne)}async function g(){t.set(!0);try{const c=await je.getServers(),f=Object.entries(c).flatMap(([v,b])=>Object.entries(b).flatMap(([S,T])=>T.map(x=>_o(x,v,S))));e.set(f),i.set(Ne)}catch(c){throw c}finally{t.set(!1)}}return a.subscribe(()=>i.set(Ne)),n.subscribe(()=>i.set(Ne)),{visibleServers:C,isLoading:t,sortBy:r,sortOrder:o,filterCountry:a,filterCity:n,countries:l,citiesForCountry:m,filteredCount:E,loadMoreServers:A,toggleSort:K,loadServers:g}}const ho=go();class yo extends EventTarget{dispatchEvent(t){return super.dispatchEvent(t)}}const xo=new yo,ae={SALT_KEY:"device_salt",LOCAL_STORAGE_KEY_PREFIX:"config_v2_",PBKDF2_ITERATIONS:25e4,PBKDF2_HASH:"SHA-256",AES_KEY_ALGORITHM:"AES-GCM",AES_KEY_LENGTH:256,IV_LENGTH_BYTES:12};var Se,Te,Hr,Ut;class wo{constructor(){wt(this,Te);wt(this,Se,null)}async set(t,r){try{const o=await ot(this,Te,Ut).call(this),a=crypto.getRandomValues(new Uint8Array(ae.IV_LENGTH_BYTES)),n=new TextEncoder().encode(JSON.stringify(r)),i=await crypto.subtle.encrypt({name:ae.AES_KEY_ALGORITHM,iv:a},o,n),l=new Uint8Array(a.length+i.byteLength);l.set(a),l.set(new Uint8Array(i),a.length);const m=btoa(String.fromCodePoint(...l));localStorage.setItem(ae.LOCAL_STORAGE_KEY_PREFIX+t,m)}catch(o){console.error("Failed to set value in secure storage:",o)}}async get(t){const r=ae.LOCAL_STORAGE_KEY_PREFIX+t,o=localStorage.getItem(r);if(!o)return null;try{const a=await ot(this,Te,Ut).call(this),n=Uint8Array.from(atob(o),y=>y.codePointAt(0)),i=n.slice(0,ae.IV_LENGTH_BYTES),l=n.slice(ae.IV_LENGTH_BYTES),m=await crypto.subtle.decrypt({name:ae.AES_KEY_ALGORITHM,iv:i},a,l);return JSON.parse(new TextDecoder().decode(m))}catch{return localStorage.removeItem(r),xo.dispatchEvent(new CustomEvent("storage-tampered",{detail:{invalidKeys:[t]}})),null}}remove(t){localStorage.removeItem(ae.LOCAL_STORAGE_KEY_PREFIX+t)}}Se=new WeakMap,Te=new WeakSet,Hr=function(){return[navigator.userAgent,navigator.language,screen.width,screen.height,navigator.hardwareConcurrency].join("|")},Ut=async function(){if(at(this,Se))return at(this,Se);if(typeof window>"u"||!window.crypto||!window.crypto.subtle)throw new Error("Web Crypto API is not available in this environment.");let t=localStorage.getItem(ae.SALT_KEY);if(!t){const i=crypto.getRandomValues(new Uint8Array(16));t=btoa(String.fromCodePoint(...i)),localStorage.setItem(ae.SALT_KEY,t)}const r=Uint8Array.from(atob(t),i=>i.codePointAt(0)),o=ot(this,Te,Hr).call(this),a=await crypto.subtle.importKey("raw",new TextEncoder().encode(o),"PBKDF2",!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:ae.PBKDF2_ITERATIONS,hash:ae.PBKDF2_HASH},a,{name:ae.AES_KEY_ALGORITHM,length:ae.AES_KEY_LENGTH},!0,["encrypt","decrypt"]);return br(this,Se,n),at(this,Se)};const Rt=new wo,Ot={CONFIG:"wireguard_config"},me={privateKey:"",dns:"103.86.96.100",endpoint:"hostname",keepalive:25},Tr=e=>!e||typeof e!="object"||!["privateKey","dns","endpoint","keepalive"].every(r=>r in e)?!1:(!e.privateKey||H.PRIVATE_KEY.validate(e.privateKey))&&H.DNS.validate(e.dns)&&["hostname","station"].includes(e.endpoint)&&H.KEEPALIVE.validate(e.keepalive),zt=(e,t)=>({country:Er(e.country),city:Er(e.city),name:e.name,privateKey:(t==null?void 0:t.privateKey)||"",dns:((t==null?void 0:t.dns)||me.dns).split(",").map(r=>r.trim()).join(", "),endpoint:(t==null?void 0:t.endpoint)||me.endpoint,keepalive:(t==null?void 0:t.keepalive)??me.keepalive});function Eo(){const{subscribe:e,set:t}=$({...me});async function r(){try{if(typeof window>"u")return;const i=await Rt.get(Ot.CONFIG);if(i&&!Tr(i))throw new Error("Config in storage is invalid or tampered.");t({...me,...i||{}})}catch(i){throw t({...me}),await Rt.remove(Ot.CONFIG),i}}async function o(i){if(!Tr(i))throw new Error("Attempted to save invalid configuration.");const l={...me,...i};await Rt.set(Ot.CONFIG,l),t(l)}async function a(i){let l={};e(A=>l=A)();const m=zt(i,l),y=await je.downloadConfig(m),E=URL.createObjectURL(y),C=document.createElement("a");C.href=E,C.download=`${i.name}.conf`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(E)}async function n(i){let l={};e(y=>l=y)();const m=await je.generateConfig(zt(i,l));await navigator.clipboard.writeText(m)}return{subscribe:e,loadSavedConfig:r,saveConfig:o,downloadConfig:a,copyConfig:n,defaultConfig:$(me)}}const Cr=Eo(),So=200,To={top:0,behavior:"smooth"};function Co(){let e=!1;typeof localStorage<"u"&&(e=localStorage.getItem("showServerIp")==="true");const t=$(e),r=$(!1),o=$(!1),a=$(!1),n=$(!1),i=$(!1),l=$(""),m=$(null);let y=!1;t.subscribe(c=>{typeof localStorage<"u"&&localStorage.setItem("showServerIp",String(c))});function E(){r.set(!1)}function C(){y||(y=!0,r.update(c=>!c),setTimeout(()=>{y=!1},So))}function A(c){E(),a.set(c==="CUSTOMIZER"),n.set(c==="KEY_GENERATOR"),i.set(c==="QR_CODE")}async function K(c,f){try{m.set(c);let v="";l.subscribe(S=>v=S)(),v&&URL.revokeObjectURL(v);const b=await f();l.set(URL.createObjectURL(b)),A("QR_CODE")}catch(v){throw i.set(!1),v}}function g(){let c="";l.subscribe(f=>c=f)(),c&&URL.revokeObjectURL(c)}return{isPanelOpen:r,showScrollTopButton:o,showServerIp:t,showCustomizer:a,showKeyGenerator:n,showQrCode:i,qrCodeUrl:l,selectedServer:m,closePanel:E,togglePanel:C,scrollToTop:()=>window.scrollTo(To),openCustomizer:()=>A("CUSTOMIZER"),openKeyGenerator:()=>A("KEY_GENERATOR"),handleShowQR:K,cleanupQrCodeUrl:g}}const Ao=Co(),Ar=100,Io=2e3;function No(){const{subscribe:e,set:t}=$(null);function r(a,n="info",i=Io){if(!a)return;const l=a instanceof Error?a.message.split(`
`)[0].slice(0,Ar):String(a).slice(0,Ar);t({message:l,type:["info","success","error"].includes(n)?n:"info",id:Date.now(),duration:i})}function o(){t(null)}return{subscribe:e,showToast:r,hideToast:o,toast:{subscribe:e}}}const Fr=No(),Ro={close:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",menu:"M0 9v2h50V9Zm0 15v2h50v-2Zm0 15v2h50v-2Z",settings:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.49.49 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.63-.07.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36 2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6",arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",eye:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z",eyeOff:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z",check:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z",key:"M12.65 10A5.99 5.99 0 0 0 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6a5.99 5.99 0 0 0 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2",downloadConfig:"M12.5 4C10.032 4 8 6.032 8 8.5v31c0 2.468 2.032 4.5 4.5 4.5h23c2.468 0 4.5-2.032 4.5-4.5v-21a1.5 1.5 0 0 0-.44-1.06l-.015-.016L26.56 4.439A1.5 1.5 0 0 0 25.5 4zm0 3H24v8.5c0 2.468 2.032 4.5 4.5 4.5H37v19.5c0 .846-.654 1.5-1.5 1.5h-23c-.846 0-1.5-.654-1.5-1.5v-31c0-.846.654-1.5 1.5-1.5M27 9.121 34.879 17H28.5c-.846 0-1.5-.654-1.5-1.5zM23.977 21.98A1.5 1.5 0 0 0 22.5 23.5v6.379l-1.44-1.44a1.5 1.5 0 1 0-2.12 2.122l4 4a1.5 1.5 0 0 0 1.08.439 1.5 1.5 0 0 0 1.04-.44l4-4a1.5 1.5 0 1 0-2.122-2.12L25.5 29.878V23.5a1.5 1.5 0 0 0-1.523-1.521M24.02 35H17.5a1.5 1.5 0 1 0 0 3h13a1.5 1.5 0 1 0 0-3z",copyConfig:"M4 2a2 2 0 0 0-2 2v14h2V4h14V2zm4 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 2h12v12H8z",showQr:"M4 3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 0v2h2V3zm5 0a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM5 5h2v2H5zm12 0h2v2h-2zm-6 2v2h2V7zm-8 4v2h2v-2zm4 0v2h2v-2zm4 0v2h2v-2zm2 2v2h2v-2zm2 0h2v-2h-2zm2 0v2h2v-2zm2 0h2v-2h-2zm0 2v2h2v-2zm0 2h-2v2h2zm-2 0h-2v2h2zm-2 0v-2h-2v2zm-2 0h-2v2h2zm0-2v-2h-2v2zm2 0h2v-2h-2zM4 15a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1zm1 2h2v2H5z",info:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z",error:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z",github:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12",nord:"m16.901 21.064 4.022 6.154-1.538-4.615L24 14.91l6.154 10.769-.732-3.482.732-1.133 9.522 15.474A19.9 19.9 0 0 0 44 24.14c0-11.046-8.954-20-20-20s-20 8.954-20 20c0 4.375 1.421 8.41 3.805 11.702z"};var Oo=Wa('<svg fill="currentColor" role="presentation" aria-hidden="true"><path></path></svg>');function ie(e,t){Oe(t,!0);let r=ro(t,"class",3,""),o=we(()=>t.name==="nord"||t.name==="downloadConfig"?"0 0 48 48":t.name==="menu"?"0 0 50 50":"0 0 24 24");var a=Oo(),n=d(a);s(a),F(()=>{L(a,"viewBox",u(o)),B(a,0,io(r())),L(n,"d",Ro[t.name])}),P(e,a),ke()}function ko(e,t){e.stopPropagation(),t()}var Ko=D('<button type="button" class="text-sm font-medium text-nord-text-secondary/50 truncate px-0 py-0 focus:outline-none hover:text-nord-text-primary transition-colors" aria-label="Copy server IP"> </button>'),Lo=(e,t,r)=>t(e,u(r)),Po=D('<button class="p-1 rounded active:scale-125 transition-transform md:hover:bg-nord-bg-active text-nord-text-primary"><!></button>'),Mo=D('<article class="p-2.5 bg-nord-bg-card border-l-2 border-transparent md:hover:border-nord-button-primary md:hover:bg-nord-bg-hover cursor-pointer group transition-colors"><div class="flex justify-between items-start gap-2"><div class="min-w-0"><h3 class="font-medium text-nord-text-primary truncate"> </h3> <p class="text-sm text-nord-text-secondary truncate"> </p> <!></div> <div class="flex items-center gap-1 shrink-0" role="group" aria-label="Server actions"><span role="status" aria-label="Server load"> </span> <div class="flex gap-0.5"></div></div></div></article>');function Uo(e,t){Oe(t,!0);const r=[{max:20,style:"bg-nord-load-low-bg text-nord-load-low-text"},{max:40,style:"bg-nord-load-medium-bg text-nord-load-medium-text"},{max:60,style:"bg-nord-load-warning-bg text-nord-load-warning-text"},{max:80,style:"bg-nord-load-high-bg text-nord-load-high-text"},{max:1/0,style:"bg-nord-load-critical-bg text-nord-load-critical-text"}],o=[{eventName:"download-config",label:"Download configuration",icon:"downloadConfig"},{eventName:"copy-config",label:"Copy configuration",icon:"copyConfig"},{eventName:"show-qr",label:"Show QR code",icon:"showQr"}],a=Dt(),n=we(()=>{var x;return((x=r.find(p=>t.load<=p.max))==null?void 0:x.style)??""});async function i(){if(t.ip)try{await navigator.clipboard.writeText(t.ip),a("copy-ip")}catch(x){console.error("Failed to copy IP:",x)}}function l(x,p){x.stopPropagation(),a(p.eventName)}var m=Mo(),y=d(m),E=d(y),C=d(E),A=d(C,!0);s(C);var K=_(C,2),g=d(K);s(K);var c=_(K,2);{var f=x=>{var p=Ko();p.__click=[ko,i];var h=d(p,!0);s(p),F(()=>te(h,t.ip)),P(x,p)};ee(c,x=>{t.showIp&&t.ip&&x(f)})}s(E);var v=_(E,2),b=d(v),S=d(b);s(b);var T=_(b,2);Fe(T,21,()=>o,ct,(x,p)=>{var h=Po();h.__click=[Lo,l,p];var k=d(h);ie(k,{get name(){return u(p).icon},class:"h-4 w-4"}),s(h),F(()=>L(h,"aria-label",u(p).label)),P(x,h)}),s(T),s(v),s(y),s(m),F(()=>{te(A,t.name),te(g,`${t.country??""} - ${t.city??""}`),B(b,1,`text-xs px-1.5 py-0.5 rounded whitespace-nowrap font-medium ${u(n)??""}`),te(S,`${t.load??""}%`)}),P(e,m),ke()}vt(["click"]);function zo(e,t,r,o){t.privateKey="",t.dns="",t.endpoint=r.defaultConfig.endpoint,t.keepalive="",o.privateKey="",o.dns="",o.keepalive=""}var Do=(e,t)=>t("privateKey",e.currentTarget.value),Go=(e,t)=>Z(t,!u(t)),Vo=D('<p id="private-key-error" class="text-xs text-nord-text-error mt-1 font-medium" role="alert"> </p>'),Bo=(e,t)=>t("dns",e.currentTarget.value),Ho=D('<p id="dns-error" class="text-xs text-nord-text-error mt-1 font-medium" role="alert"> </p>'),Fo=D("<option> </option>"),Yo=(e,t)=>t("keepalive",e.currentTarget.value),$o=D('<p id="keepalive-error" class="text-xs text-nord-text-error mt-1 font-medium" role="alert"> </p>'),jo=(e,t)=>t("cancel"),qo=D('<button type="button" aria-label="Reset to default values">Reset</button>'),Qo=D('<div class="min-h-screen bg-vscode-bg text-vscode-text" role="dialog" aria-labelledby="config-customizer-title"><header class="sticky top-0 z-50 bg-vscode-header border-b border-vscode-active shadow-lg"><div class="px-4 h-14 flex items-center"><h1 id="config-customizer-title" class="text-lg font-medium">Customize Configuration</h1></div></header> <form class="container mx-auto px-4 py-6 max-w-2xl"><div class="space-y-6" role="group" aria-label="Configuration options"><div class="space-y-2"><label for="private-key" class="block text-sm font-medium text-nord-text-primary">Private Key</label> <div class="relative"><input id="private-key" placeholder="YOUR_PRIVATE_KEY"/> <button type="button" class="absolute right-2.5 top-1/2 -translate-y-1/2 p-1 text-nord-text-primary/70 hover:text-nord-text-primary transition-colors outline-none"><!></button></div> <!></div> <div class="space-y-2"><label for="dns" class="block text-sm font-medium text-nord-text-primary">DNS</label> <input id="dns" type="text"/> <!></div> <div class="space-y-2"><label for="endpoint" class="block text-sm font-medium text-nord-text-primary">Endpoint Type</label> <select id="endpoint"></select></div> <div class="space-y-2"><label for="keepalive" class="block text-sm font-medium text-nord-text-primary"> </label> <input id="keepalive" type="number"/> <!></div></div> <div class="fixed bottom-0 left-0 right-0 bg-vscode-header border-t border-vscode-active p-4"><div class="container mx-auto max-w-2xl flex justify-end gap-3"><button type="submit" aria-label="Save configuration">Save</button> <button type="button" aria-label="Cancel changes">Cancel</button> <!></div></div></form></div>');function Xo(e,t){Oe(t,!0);const r=Dt(),o=[{value:"hostname",label:"Hostname"},{value:"station",label:"IP"}],a={INPUT_BASE:"w-full bg-vscode-bg border rounded px-3 py-2 text-sm outline-none transition-colors",INPUT_ERROR:"border-nord-text-error focus:border-nord-text-error focus:ring-2 focus:ring-nord-ring-error/30 text-nord-text-error",INPUT_DEFAULT:"border-nord-button-secondary focus:border-nord-button-primary focus:ring-2 focus:ring-nord-ring-primary/30 text-nord-text-primary",BUTTON_BASE:"min-w-touch min-h-touch px-4 py-2 rounded transition-colors"};let n=hr({privateKey:t.savedConfig.privateKey??"",dns:t.savedConfig.dns??"",endpoint:t.savedConfig.endpoint??t.defaultConfig.endpoint,keepalive:t.savedConfig.keepalive??""}),i=hr({privateKey:"",dns:"",keepalive:""}),l=He(!1);const m=we(()=>n.privateKey!==(t.savedConfig.privateKey??"")||n.dns!==(t.savedConfig.dns??"")||n.endpoint!==(t.savedConfig.endpoint??t.defaultConfig.endpoint)||n.keepalive!==(t.savedConfig.keepalive??"")),y=we(()=>u(m)&&!Object.values(i).some(Boolean)),E=we(()=>!!(t.savedConfig.privateKey||t.savedConfig.dns&&t.savedConfig.dns!==t.defaultConfig.dns||t.savedConfig.endpoint&&t.savedConfig.endpoint!==t.defaultConfig.endpoint||t.savedConfig.keepalive&&t.savedConfig.keepalive!==t.defaultConfig.keepalive));function C(w,R){const Y={privateKey:()=>H.PRIVATE_KEY.validate(R)?"":H.PRIVATE_KEY.ERROR,dns:()=>H.DNS.validate(R)?"":H.DNS.ERROR,keepalive:()=>H.KEEPALIVE.validate(String(R))?"":H.KEEPALIVE.ERROR};w in Y&&(i[w]=Y[w]())}function A(w,R){n[w]=R,w in i&&C(w,R)}function K(w){w.preventDefault(),u(y)&&r("save",{...n,dns:n.dns||t.defaultConfig.dns,keepalive:n.keepalive||t.defaultConfig.keepalive,endpoint:n.endpoint||t.defaultConfig.endpoint})}var g=Qo(),c=_(d(g),2),f=d(c),v=d(f),b=_(d(v),2),S=d(b);st(S),S.__input=[Do,A];var T=_(S,2);T.__click=[Go,l];var x=d(T);{let w=we(()=>u(l)?"eye":"eyeOff");ie(x,{get name(){return u(w)},class:"w-4 h-4"})}s(T),s(b);var p=_(b,2);{var h=w=>{var R=Vo(),Y=d(R,!0);s(R),F(()=>te(Y,i.privateKey)),P(w,R)};ee(p,w=>{i.privateKey&&w(h)})}s(v);var k=_(v,2),z=_(d(k),2);st(z),z.__input=[Bo,A];var se=_(z,2);{var q=w=>{var R=Ho(),Y=d(R,!0);s(R),F(()=>te(Y,i.dns)),P(w,R)};ee(se,w=>{i.dns&&w(q)})}s(k);var G=_(k,2),re=_(d(G),2);Fe(re,21,()=>o,ct,(w,R)=>{var Y=Fo(),ge=d(Y,!0);s(Y);var Qe={};F(()=>{te(ge,u(R).label),Qe!==(Qe=u(R).value)&&(Y.value=(Y.__value=u(R).value)??"")}),P(w,Y)}),s(re),s(G);var I=_(G,2),M=d(I),Q=d(M);s(M);var X=_(M,2);st(X),X.__input=[Yo,A];var Ke=_(X,2);{var Ce=w=>{var R=$o(),Y=d(R,!0);s(R),F(()=>te(Y,i.keepalive)),P(w,R)};ee(Ke,w=>{i.keepalive&&w(Ce)})}s(I),s(f);var _e=_(f,2),ve=d(_e),ue=d(ve),fe=_(ue,2);fe.__click=[jo,r];var pt=_(fe,2);{var qe=w=>{var R=qo();R.__click=[zo,n,t,i],F(()=>B(R,1,`${a.BUTTON_BASE} border border-nord-button-secondary hover:bg-nord-bg-hover text-nord-text-secondary focus:ring-2 focus:ring-nord-ring-secondary/50`)),P(w,R)};ee(pt,w=>{u(E)&&w(qe)})}s(ve),s(_e),s(c),s(g),F(w=>{L(S,"type",u(l)?"text":"password"),B(S,1,`${a.INPUT_BASE} ${i.privateKey?a.INPUT_ERROR:a.INPUT_DEFAULT}`),L(S,"aria-invalid",!!i.privateKey),L(S,"aria-describedby",i.privateKey?"private-key-error":void 0),L(T,"aria-label",u(l)?"Hide private key":"Show private key"),L(z,"placeholder",`${t.defaultConfig.dns??""} (e.g., 103.86.96.100, 8.8.8.8)`),B(z,1,`${a.INPUT_BASE} ${i.dns?a.INPUT_ERROR:a.INPUT_DEFAULT}`),L(z,"aria-invalid",!!i.dns),L(z,"aria-describedby",i.dns?"dns-error":void 0),B(re,1,`${a.INPUT_BASE} ${a.INPUT_DEFAULT} appearance-none cursor-pointer`),te(Q,`Keepalive (${H.KEEPALIVE.MIN}-${H.KEEPALIVE.MAX} seconds)`),L(X,"min",H.KEEPALIVE.MIN),L(X,"max",H.KEEPALIVE.MAX),L(X,"placeholder",w),B(X,1,`${a.INPUT_BASE} ${i.keepalive?a.INPUT_ERROR:a.INPUT_DEFAULT} [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`),L(X,"aria-invalid",!!i.keepalive),L(X,"aria-describedby",i.keepalive?"keepalive-error":void 0),ue.disabled=!u(y),B(ue,1,`${a.BUTTON_BASE} text-white ${u(y)?"bg-nord-button-primary hover:bg-nord-button-primary-hover focus:ring-2 focus:ring-nord-ring-primary/50":"bg-nord-button-primary/40 cursor-not-allowed"}`),B(fe,1,`${a.BUTTON_BASE} border border-nord-button-secondary hover:bg-nord-bg-hover focus:ring-2 focus:ring-nord-ring-secondary/50`)},[()=>String(t.defaultConfig.keepalive)]),dt("submit",c,K),lt(S,()=>n.privateKey,w=>n.privateKey=w),lt(z,()=>n.dns,w=>n.dns=w),Mt(re,()=>n.endpoint,w=>n.endpoint=w),lt(X,()=>n.keepalive,w=>n.keepalive=w),P(e,g),ke()}vt(["input","click"]);var Jo=(e,t)=>Z(t,!u(t)),Wo=D('<p id="token-error" class="text-xs text-nord-text-error mt-1 font-medium" role="alert"> </p>'),Zo=D("<span>Generating...</span>"),en=D("<span>Generate</span>"),tn=(e,t)=>t("cancel"),rn=D('<div class="min-h-[100dvh] bg-vscode-bg text-vscode-text flex flex-col"><header class="sticky top-0 z-50 bg-vscode-header border-b border-vscode-active shadow-lg"><div class="px-6 h-14 flex items-center"><h1 class="text-lg font-medium">Generate Private Key</h1></div></header> <main class="flex-1 overflow-auto"><form class="container mx-auto p-6 max-w-2xl"><div class="space-y-2"><label for="auth-token" class="block text-sm font-medium text-nord-text-primary">Auth Token</label> <div class="relative"><input id="auth-token" placeholder="64-character hexadecimal token" maxlength="64"/> <button type="button" class="absolute right-2.5 top-1/2 -translate-y-1/2 p-1 text-nord-text-primary/70 hover:text-nord-text-primary"><!></button></div> <!></div></form></main> <footer class="bg-vscode-header border-t border-vscode-active p-4"><div class="container mx-auto max-w-2xl flex justify-end gap-3"><button type="button"><!></button> <button type="button">Cancel</button></div></footer></div>');function an(e,t){Oe(t,!0);const r={INPUT_BASE:"w-full bg-vscode-bg border rounded px-3 py-2 text-sm outline-none transition-colors",INPUT_ERROR:"border-nord-text-error focus:border-nord-text-error focus:ring-2 focus:ring-nord-ring-error/30 text-nord-text-error",INPUT_DEFAULT:"border-nord-button-secondary focus:border-nord-button-primary focus:ring-2 focus:ring-nord-ring-primary/30 text-nord-text-primary",BUTTON_BASE:"min-w-touch min-h-touch px-4 py-2 rounded transition-colors focus:outline-none focus:ring-2"},o=Dt();let a=He(""),n=He(""),i=He(!1),l=He(!1),m;function y(I){return I?H.TOKEN.REGEX.test(I)?"":H.TOKEN.ERROR:""}function E(I){const M=I.currentTarget,Q=H.TOKEN.sanitize(M.value);Z(a,Q,!0),M.value=Q,clearTimeout(m),m=window.setTimeout(()=>{Z(n,y(u(a)),!0)},300)}function C(I){I.preventDefault();const M=I.clipboardData;if(M){const Q=H.TOKEN.sanitize(M.getData("text"));Z(a,Q,!0),Z(n,y(Q),!0)}}async function A(){if(Z(n,y(u(a)),!0),u(n)||!u(a)){u(a)||Z(n,"Please enter a token.");return}Z(l,!0);try{o("generate",u(a))}finally{Z(l,!1)}}Nr(()=>{clearTimeout(m)});var K=rn(),g=_(d(K),2),c=d(g),f=d(c),v=_(d(f),2),b=d(v);st(b),b.__input=E;var S=_(b,2);S.__click=[Jo,i];var T=d(S);{let I=we(()=>u(i)?"eye":"eyeOff");ie(T,{get name(){return u(I)},class:"w-4 h-4"})}s(S),s(v);var x=_(v,2);{var p=I=>{var M=Wo(),Q=d(M,!0);s(M),F(()=>te(Q,u(n))),P(I,M)};ee(x,I=>{u(n)&&I(p)})}s(f),s(c),s(g);var h=_(g,2),k=d(h),z=d(k);z.__click=A;var se=d(z);{var q=I=>{var M=Zo();P(I,M)},G=I=>{var M=en();P(I,M)};ee(se,I=>{u(l)?I(q):I(G,!1)})}s(z);var re=_(z,2);re.__click=[tn,o],s(k),s(h),s(K),F(()=>{L(b,"type",u(i)?"text":"password"),B(b,1,`${r.INPUT_BASE} ${u(n)?r.INPUT_ERROR:r.INPUT_DEFAULT}`),L(b,"aria-invalid",!!u(n)),L(b,"aria-describedby",u(n)?"token-error":void 0),L(S,"aria-label",u(i)?"Hide token":"Show token"),z.disabled=u(l)||!!u(n)||!u(a),B(z,1,`${r.BUTTON_BASE} text-white w-[140px] ${u(l)||u(n)||!u(a)?"bg-nord-button-primary/40 cursor-not-allowed":"bg-nord-button-primary hover:bg-nord-button-primary-hover focus:ring-nord-ring-primary/50"}`),B(re,1,`${r.BUTTON_BASE} border border-nord-button-secondary hover:bg-nord-bg-hover focus:ring-nord-ring-secondary/50`)}),dt("submit",c,I=>{I.preventDefault(),A()}),dt("paste",b,C),lt(b,()=>u(a),I=>Z(a,I)),P(e,K),ke()}vt(["input","click"]);var on=D('<div role="alert"><div class="px-4 py-2 rounded border border-current shadow-lg flex items-center gap-2"><!> <span class="text-sm"> </span></div></div>');function nn(e,t){Oe(t,!1);const[r,o]=zr(),a=()=>V(l,"$toast",r),n=Kt(),i=200,{toast:l,hideToast:m}=Fr;let y=Kt(!1),E,C;const A={info:"bg-nord-bg-overlay border-nord-text-primary/20 text-nord-text-primary shadow-nord-text-primary/10",success:"bg-nord-success-bg border-nord-success-text/20 text-nord-success-text shadow-nord-success-text/10",error:"bg-nord-load-critical-bg border-nord-load-critical-text/20 text-nord-load-critical-text shadow-nord-load-critical-text/10"},K={success:"check",error:"error",info:"info"};Rr(()=>l.subscribe(b=>{clearTimeout(E),clearTimeout(C),b?requestAnimationFrame(()=>{Z(y,!0),E=window.setTimeout(()=>{Z(y,!1),C=window.setTimeout(()=>{m()},i)},b.duration)}):Z(y,!1)})),Nr(()=>{clearTimeout(E),clearTimeout(C)}),Za(()=>a(),()=>{Z(n,a())}),eo(),Dr();var g=Ur(),c=Lt(g);{var f=v=>{var b=on(),S=d(b),T=d(S);ie(T,{get name(){return u(n),it(()=>K[u(n).type])},class:"w-4 h-4"});var x=_(T,2),p=d(x,!0);s(x),s(S),s(b),F(()=>{B(b,1,`fixed bottom-4 right-4 z-[100] transition-transform transition-opacity duration-200 ${u(y)?"translate-y-0 opacity-100":"translate-y-2 opacity-0"} ${u(n),it(()=>A[u(n).type])??""}`),te(p,(u(n),it(()=>u(n).message)))}),P(v,b)};ee(c,v=>{u(n)&&v(f)})}P(e,g),ke(),o()}function sn(e,t,r,o,a,n,i){const l=e.currentTarget.value;j(r,l),l?n().length===1?j(a,n()[0]):j(a,""):j(a,"")}function ln(e,t,r){e.currentTarget===e.target&&j(r,!1)}function dn(e,t,r){e.key==="Enter"&&e.currentTarget===e.target&&j(r,!1)}var cn=(e,t,r)=>j(r,!1),vn=D('<div class="fixed inset-0 z-50 flex items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="qr-dialog-title" tabindex="-1"><div class="relative bg-vscode-bg rounded-lg border border-vscode-active overflow-hidden max-w-sm w-full qr-dialog" role="document"><div class="bg-nord-bg-overlay-light px-3 py-1.5 text-xs font-medium border-b border-vscode-active flex items-center justify-between text-nord-text-primary"><span id="qr-dialog-title"> </span> <button class="p-1 rounded hover:bg-nord-bg-hover" aria-label="Close QR code dialog"><!></button></div> <div class="p-6 flex justify-center"><img class="w-[200px] h-[200px] rounded"/></div></div></div>'),un=(e,t)=>{e.preventDefault(),t()},fn=D("<option> </option>"),pn=D("<option>All Cities</option>"),bn=D("<option> </option>"),mn=(e,t)=>t("load"),_n=(e,t)=>t("name"),gn=D('<button class="fixed inset-0 bg-nord-bg-overlay/30 z-30 transition-opacity duration-150 cursor-default" aria-label="Close panel" tabindex="-1"></button>'),hn=(e,t,r)=>j(r,!t()),yn=D('<div class="flex justify-center py-4"><div class="w-6 h-6 border-2 border-vscode-accent border-t-transparent rounded-full animate-spin"></div></div>'),xn=D('<button class="fixed bottom-4 right-4 min-w-touch min-h-touch p-2 rounded-full bg-vscode-header/90 backdrop-blur-sm border border-vscode-accent text-vscode-text shadow-lg z-50 md:hover:bg-nord-bg-hover" aria-label="Scroll to top"><!></button>'),wn=D('<div class="min-h-screen bg-vscode-bg text-vscode-text"><header class="sticky top-0 z-50 bg-vscode-header border-b border-vscode-active shadow-lg"><h1 class="sr-only">NordVPN WireGuard Config Generator</h1> <div class="flex flex-col sm:flex-row sm:items-center gap-2 p-2"><nav class="flex items-center gap-2 flex-1" aria-label="Main navigation"><button class="shrink-0 min-w-touch min-h-touch p-2 flex items-center justify-center touch-manipulation focus:outline-none md:hover:bg-nord-bg-hover" aria-label="Toggle navigation menu"><!></button> <div class="flex gap-2 w-full sm:w-auto overflow-hidden" role="group"><select aria-label="Filter by country"><option>All Countries</option><!></select> <div><select class="w-full bg-vscode-bg border border-vscode-active rounded px-2 py-1.5 text-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:border-nord-text-secondary/30 touch-pan-y" aria-label="Filter by city"><!><!></select></div></div></nav> <div class="flex items-center justify-end gap-2 text-xs" role="group" aria-label="Sort controls"><button aria-label="Sort by server load">By Load</button> <button aria-label="Sort alphabetically">A-Z</button> <div class="px-3 py-1.5 rounded bg-vscode-bg/50 border border-vscode-active/50" role="status" aria-live="polite"><span class="text-xs text-nord-text-secondary font-semibold"> </span></div></div></div></header> <!> <aside aria-label="Settings panel"><div class="sticky top-0 h-[115px] sm:h-14 bg-vscode-header"></div> <div class="flex-1 overflow-y-auto"><div class="p-4 space-y-3"><button class="w-full min-h-touch px-4 py-2.5 rounded border border-vscode-active bg-nord-bg-overlay/20 text-sm transition-colors relative group overflow-hidden active:scale-[0.98] md:active:scale-100"><div class="absolute inset-y-0 left-0 w-1 bg-vscode-accent transform -translate-x-1 md:group-hover:translate-x-0 transition-transform"></div> <div class="flex items-center gap-2"><!> <span>Customize Config</span></div></button> <button class="w-full min-h-touch px-4 py-2.5 rounded border border-vscode-active bg-nord-bg-overlay/20 text-sm transition-colors relative group overflow-hidden active:scale-[0.98] md:active:scale-100"><div class="absolute inset-y-0 left-0 w-1 bg-vscode-accent transform -translate-x-1 md:group-hover:translate-x-0 transition-transform"></div> <div class="flex items-center gap-2"><!> <span>Generate Key</span></div></button> <div class="mt-4"><label class="flex items-center justify-between cursor-pointer group"><span class="text-sm font-medium text-nord-text-primary">Show Server IP</span> <button type="button" aria-label="Toggle server IP display"><span></span></button></label></div></div></div> <div class="p-4 space-y-3 border-t border-vscode-active bg-nord-bg-overlay/20"><a href="https://github.com/mustafachyi/NordVPN-WireGuard-Config-Generator" target="_blank" rel="noopener" class="block px-4 py-2.5 rounded border border-nord-external-github/50 bg-nord-external-github/10 text-sm text-nord-external-github transition-colors relative group overflow-hidden active:scale-[0.98] md:active:scale-100"><div class="absolute inset-y-0 left-0 w-1 bg-nord-external-github transform -translate-x-1 md:group-hover:translate-x-0 transition-transform"></div> <div class="flex items-center justify-center gap-2"><!> <span>Star on GitHub</span></div></a> <a href="https://refer-nordvpn.com/MXIVDoJGpKT" target="_blank" rel="noopener" class="block px-4 py-2.5 rounded border border-nord-external-nord/50 bg-nord-external-nord/10 text-sm text-nord-external-nord transition-colors relative group overflow-hidden active:scale-[0.98] md:active:scale-100"><div class="absolute inset-y-0 left-0 w-1 bg-nord-external-nord transform -translate-x-1 md:group-hover:translate-x-0 transition-transform"></div> <div class="flex items-center justify-center gap-2"><!> <span>Get Nord</span></div></a></div></aside> <main class="container mx-auto px-4 py-6"><h2 class="sr-only">Available Servers</h2> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 mx-auto"></div> <!></main> <!></div>'),En=D("<!> <!> <!>",1);function On(e,t){Oe(t,!1);const[r,o]=zr(),a=()=>V(q,"$filterCountry",r),n=()=>V(G,"$filterCity",r),i=()=>V(I,"$citiesForCountry",r),l=()=>V(qe,"$showScrollTopButton",r),m=()=>V(Cr,"$configStore",r),y=()=>V(Y,"$showKeyGenerator",r),E=()=>V(R,"$showCustomizer",r),C=()=>V(pt,"$isPanelOpen",r),A=()=>V(ge,"$showQrCode",r),K=()=>V(Yr,"$selectedServer",r),g=()=>V(Qe,"$qrCodeUrl",r),c=()=>V(Ce,"$defaultConfig",r),f=()=>V(re,"$countries",r),v=()=>V(z,"$sortBy",r),b=()=>V(se,"$sortOrder",r),S=()=>V(M,"$filteredCount",r),T=()=>V(w,"$showServerIp",r),x=()=>V(h,"$visibleServers",r),p=()=>V(k,"$isLoading",r),{visibleServers:h,isLoading:k,sortBy:z,sortOrder:se,filterCountry:q,filterCity:G,countries:re,citiesForCountry:I,filteredCount:M,loadMoreServers:Q,toggleSort:X,loadServers:Ke}=ho,{defaultConfig:Ce,loadSavedConfig:_e,saveConfig:ve,downloadConfig:ue,copyConfig:fe}=Cr,{isPanelOpen:pt,showScrollTopButton:qe,showServerIp:w,showCustomizer:R,showKeyGenerator:Y,showQrCode:ge,qrCodeUrl:Qe,selectedServer:Yr,closePanel:Gt,togglePanel:Vt,scrollToTop:$r,openCustomizer:jr,openKeyGenerator:qr,handleShowQR:Qr,cleanupQrCodeUrl:Xr}=Ao,{showToast:le}=Fr,Bt=mo(()=>{const{innerHeight:U,scrollY:J}=window,{offsetHeight:oe}=document.documentElement;J>oe-U-1e3&&Q(),j(qe,J>500)},100);async function Jr(U){const J=U.detail;try{const{key:oe}=await je.generateKey(J);await ve({...m(),privateKey:oe}),j(Y,!1),le("Private key generated and saved","success")}catch(oe){const he=oe.status===401?"The provided token is invalid":"Key generation failed";le(he,"error")}}async function Wr(U){const J=U.detail;try{await ve(J),j(R,!1),le("Configuration saved","success")}catch(oe){le(oe.message,"error")}}async function Zr(U){try{await ue(U),le("Configuration downloaded","success")}catch{le("Download failed","error")}}async function ea(U){try{await fe(U),le("Configuration copied","success")}catch{le("Copy failed","error")}}function ta(U){U.key==="Escape"&&(C()&&Gt(),A()&&j(ge,!1))}Rr(()=>{window.scrollTo(0,0);try{Promise.all([Ke(),_e()])}catch(U){le(U.message||"Unable to load application data","error")}return window.addEventListener("scroll",Bt),()=>{window.removeEventListener("scroll",Bt),Xr()}}),Dr();var Ht=En();dt("keydown",to,ta);var Ft=Lt(Ht);nn(Ft,{});var Yt=_(Ft,2);{var ra=U=>{var J=vn();J.__click=[ln,A,ge],J.__keydown=[dn,A,ge];var oe=d(J),he=d(oe),Le=d(he),pe=d(Le,!0);s(Le);var ye=_(Le,2);ye.__click=[cn,A,ge];var Pe=d(ye);ie(Pe,{name:"close",class:"w-3.5 h-3.5"}),s(ye),s(he);var Me=_(he,2),Ae=d(Me);s(Me),s(oe),s(J),F(()=>{var be,Xe;te(pe,(be=K())==null?void 0:be.name),L(Ae,"src",g()),L(Ae,"alt","WireGuard Configuration QR Code for server "+((Xe=K())==null?void 0:Xe.name))}),P(U,J)};ee(Yt,U=>{A()&&U(ra)})}var aa=_(Yt,2);{var oa=U=>{an(U,{$$events:{generate:Jr,cancel:()=>j(Y,!1)}})},na=U=>{var J=Ur(),oe=Lt(J);{var he=pe=>{Xo(pe,{get defaultConfig(){return c()},get savedConfig(){return m()},$$events:{save:Wr,cancel:()=>j(R,!1)}})},Le=pe=>{var ye=wn(),Pe=d(ye),Me=_(d(Pe),2),Ae=d(Me),be=d(Ae);be.__click=Vt,be.__touchstart=[un,Vt];var Xe=d(be);ie(Xe,{name:"menu",class:"w-5 h-5"}),s(be);var $t=_(be,2),Ie=d($t);F(()=>{a(),yr(()=>{f()})}),Ie.__change=[sn,a,q,n,G,i,I];let jt;var bt=d(Ie);bt.value=bt.__value="";var ia=_(bt);Fe(ia,1,f,ct,(O,N)=>{var W=fn(),ze=d(W,!0);s(W);var xe={};F(De=>{te(ze,De),xe!==(xe=u(N))&&(W.value=(W.__value=u(N))??"")},[()=>$e(u(N))]),P(O,W)}),s(Ie);var mt=_(Ie,2);let qt;var Je=d(mt);F(()=>{n(),yr(()=>{i()})});var Qt=d(Je);{var sa=O=>{var N=pn();N.value=N.__value="",P(O,N)};ee(Qt,O=>{i().length>1&&O(sa)})}var la=_(Qt);Fe(la,1,i,ct,(O,N)=>{var W=bn(),ze=d(W,!0);s(W);var xe={};F(De=>{te(ze,De),xe!==(xe=u(N))&&(W.value=(W.__value=u(N))??"")},[()=>$e(u(N))]),P(O,W)}),s(Je),s(mt),s($t),s(Ae);var Xt=_(Ae,2),We=d(Xt);We.__click=[mn,X];let Jt;var Ze=_(We,2);Ze.__click=[_n,X];let Wt;var Zt=_(Ze,2),er=d(Zt),da=d(er);s(er),s(Zt),s(Xt),s(Me),s(Pe);var tr=_(Pe,2);{var ca=O=>{var N=gn();N.__click=Gt,P(O,N)};ee(tr,O=>{C()&&O(ca)})}var et=_(tr,2);let rr;var _t=_(d(et),2),ar=d(_t),tt=d(ar);tt.__click=jr;var or=_(d(tt),2),va=d(or);ie(va,{name:"settings",class:"w-4 h-4 text-vscode-accent"}),nt(2),s(or),s(tt);var rt=_(tt,2);rt.__click=qr;var nr=_(d(rt),2),ua=d(nr);ie(ua,{name:"key",class:"w-4 h-4 text-vscode-accent"}),nt(2),s(nr),s(rt);var ir=_(rt,2),sr=d(ir),Ue=_(d(sr),2);Ue.__click=[hn,T,w];let lr;var fa=d(Ue);let dr;s(Ue),s(sr),s(ir),s(ar),s(_t);var cr=_(_t,2),gt=d(cr),vr=_(d(gt),2),pa=d(vr);ie(pa,{name:"github",class:"w-4 h-4"}),nt(2),s(vr),s(gt);var ur=_(gt,2),fr=_(d(ur),2),ba=d(fr);ie(ba,{name:"nord",class:"w-4 h-4"}),nt(2),s(fr),s(ur),s(cr),s(et);var ht=_(et,2),yt=_(d(ht),2);Fe(yt,5,x,O=>O.name,(O,N)=>{Uo(O,{get name(){return u(N).displayName},get country(){return u(N).displayCountry},get city(){return u(N).displayCity},get ip(){return u(N).ip},get showIp(){return T()},get load(){return u(N).load},$$events:{"download-config":()=>Zr(u(N)),"copy-config":()=>ea(u(N)),"show-qr":()=>Qr(u(N),()=>je.generateQR(zt(u(N),m()))),"copy-ip":()=>le("IP copied","success")}})}),s(yt);var ma=_(yt,2);{var _a=O=>{var N=yn();P(O,N)};ee(ma,O=>{p()&&O(_a)})}s(ht);var ga=_(ht,2);{var ha=O=>{var N=xn();N.__click=$r;var W=d(N);ie(W,{name:"arrowUp",class:"w-5 h-5"}),s(N),P(O,N)};ee(ga,O=>{l()&&O(ha)})}s(ye),F((O,N,W,ze,xe,De,ya)=>{jt=B(Ie,1,"bg-vscode-bg border border-vscode-active rounded px-2 py-1.5 text-sm touch-pan-y transition-all duration-200 sm:w-[200px]",null,jt,O),qt=B(mt,1,"overflow-hidden transition-[width] duration-200",null,qt,N),Je.disabled=i().length<=1,Jt=B(We,1,"min-w-[80px] px-3 py-1.5 rounded border border-vscode-active md:hover:bg-nord-bg-hover font-semibold",null,Jt,W),L(We,"aria-pressed",v()==="load"),Wt=B(Ze,1,"min-w-[80px] px-3 py-1.5 rounded border border-vscode-active md:hover:bg-nord-bg-hover font-semibold",null,Wt,ze),L(Ze,"aria-pressed",v()==="name"),te(da,`${S()??""} servers`),rr=B(et,1,"fixed inset-y-0 left-0 w-64 bg-vscode-header border-r border-vscode-active z-40 transition-transform duration-150 flex flex-col",null,rr,xe),lr=B(Ue,1,"relative w-10 h-5 rounded-full transition-colors focus:outline-none",null,lr,De),L(Ue,"aria-pressed",T()),dr=B(fa,1,"absolute left-0 top-0 w-4 h-4 rounded-full bg-white transition-transform mt-0.5",null,dr,ya)},[()=>({"w-full":!a(),"w-[45%]":a()}),()=>({"w-0":!a(),"w-[55%]":a(),"sm:w-[200px]":a()}),()=>({"bg-nord-load-low-bg":v()==="load"&&b()==="asc","text-nord-load-low-text":v()==="load"&&b()==="asc","border-nord-load-low-text":v()==="load"&&b()==="asc","bg-nord-load-critical-bg":v()==="load"&&b()==="desc","text-nord-load-critical-text":v()==="load"&&b()==="desc","border-nord-load-critical-text":v()==="load"&&b()==="desc"}),()=>({"bg-nord-load-medium-bg":v()==="name"&&b()==="asc","text-nord-load-medium-text":v()==="name"&&b()==="asc","border-nord-load-medium-text":v()==="name"&&b()==="asc","bg-nord-load-warning-bg":v()==="name"&&b()==="desc","text-nord-load-warning-text":v()==="name"&&b()==="desc","border-nord-load-warning-text":v()==="name"&&b()==="desc"}),()=>({"translate-x-0":C(),"-translate-x-full":!C()}),()=>({"bg-nord-button-primary":T(),"hover:bg-nord-button-primary-hover":T(),"bg-nord-button-secondary":!T(),"hover:bg-nord-button-secondary-hover":!T()}),()=>({"translate-x-5":T(),"translate-x-0.5":!T()})]),Mt(Ie,a,O=>j(q,O)),Mt(Je,n,O=>j(G,O)),P(pe,ye)};ee(oe,pe=>{E()?pe(he):pe(Le,!1)},!0)}P(U,J)};ee(aa,U=>{y()?U(oa):U(na,!1)})}P(e,Ht),ke(),o()}vt(["click","keydown","touchstart","change"]);export{On as component};
