import{r as x,w as R,c as k,a as v,o as u,b as a,d as f,n as d,e as U,_ as S,t as p,f as O,v as B,F as w,g as V,u as b,V as s,h as L}from"./index-DozLruVz.js";const D={class:"min-h-screen bg-vscode-bg text-vscode-text",role:"dialog","aria-labelledby":"config-customizer-title"},F={class:"space-y-6",role:"group","aria-label":"Configuration options"},M={class:"space-y-2"},z={class:"relative"},j=["value","type","aria-invalid","aria-describedby"],Y=["aria-label"],$={key:0,id:"private-key-error",class:"text-xs text-nord-text-error mt-1 font-medium",role:"alert"},q={class:"space-y-2"},H=["value","placeholder","aria-invalid","aria-describedby"],X={key:0,id:"dns-error",class:"text-xs text-nord-text-error mt-1 font-medium",role:"alert"},G={class:"space-y-2"},J=["value"],Q={class:"space-y-2"},W={for:"keepalive",class:"block text-sm font-medium text-nord-text-primary"},Z=["value","min","max","placeholder","aria-invalid","aria-describedby"],ee={key:0,id:"keepalive-error",class:"text-xs text-nord-text-error mt-1 font-medium",role:"alert"},te={class:"fixed bottom-0 left-0 right-0 bg-vscode-header border-t border-vscode-active p-4"},ae={class:"container mx-auto max-w-2xl flex justify-end gap-3"},oe=["disabled"],ie={__name:"ConfigCustomizer",props:{defaultConfig:{type:Object,required:!0},savedConfig:{type:Object,required:!0}},emits:["save","cancel"],setup(g,{emit:C}){const h=[{value:"hostname",label:"Hostname"},{value:"station",label:"IP"}],r={INPUT_BASE:"w-full bg-vscode-bg border rounded px-3 py-2 text-sm outline-none transition-colors",INPUT_ERROR:"border-nord-text-error focus:border-nord-text-error focus:ring-2 focus:ring-nord-ring-error/30 text-nord-text-error",INPUT_DEFAULT:"border-nord-button-secondary focus:border-nord-button-primary focus:ring-2 focus:ring-nord-ring-primary/30 text-nord-text-primary",BUTTON_BASE:"min-w-touch min-h-touch px-4 py-2 rounded transition-colors"},e=g,E=C,n=x({}),o=x({privateKey:"",dns:"",keepalive:""}),c=x(!1),_=()=>{n.value={privateKey:e.savedConfig.privateKey??"",dns:e.savedConfig.dns??"",endpoint:e.savedConfig.endpoint??e.defaultConfig.endpoint,keepalive:e.savedConfig.keepalive??""},o.value={privateKey:"",dns:"",keepalive:""}};R(()=>e.savedConfig,_,{deep:!0,immediate:!0});const I=k(()=>n.value.privateKey!==(e.savedConfig.privateKey??"")||n.value.dns!==(e.savedConfig.dns??"")||n.value.endpoint!==(e.savedConfig.endpoint??e.defaultConfig.endpoint)||n.value.keepalive!==(e.savedConfig.keepalive??"")),m=k(()=>I.value&&!Object.values(o.value).some(Boolean)),T=k(()=>!!(e.savedConfig.privateKey||e.savedConfig.dns&&e.savedConfig.dns!==e.defaultConfig.dns||e.savedConfig.endpoint&&e.savedConfig.endpoint!==e.defaultConfig.endpoint||e.savedConfig.keepalive&&e.savedConfig.keepalive!==e.defaultConfig.keepalive)),N=(l,t)=>{const i={privateKey:()=>s.PRIVATE_KEY.validate(t)?"":s.PRIVATE_KEY.ERROR,dns:()=>s.DNS.validate(t)?"":s.DNS.ERROR,keepalive:()=>s.KEEPALIVE.validate(t)?"":s.KEEPALIVE.ERROR};i[l]&&(o.value[l]=i[l]())},y=(l,t)=>{n.value[l]=t,N(l,t)},K=()=>{m.value&&E("save",{...n.value,dns:n.value.dns||e.defaultConfig.dns,keepalive:n.value.keepalive||e.defaultConfig.keepalive,endpoint:n.value.endpoint||e.defaultConfig.endpoint})},A=()=>{_(),E("cancel")},P=()=>{n.value={privateKey:"",dns:"",endpoint:e.defaultConfig.endpoint,keepalive:""},o.value={privateKey:"",dns:"",keepalive:""}};return(l,t)=>(u(),v("div",D,[t[8]||(t[8]=a("header",{class:"sticky top-0 z-50 bg-vscode-header border-b border-vscode-active shadow-lg"},[a("div",{class:"px-4 h-14 flex items-center"},[a("h1",{id:"config-customizer-title",class:"text-lg font-medium"},"Customize Configuration")])],-1)),a("form",{onSubmit:L(K,["prevent"]),class:"container mx-auto px-4 py-6 max-w-2xl"},[a("div",F,[a("div",M,[t[5]||(t[5]=a("label",{for:"private-key",class:"block text-sm font-medium text-nord-text-primary"},"Private Key",-1)),a("div",z,[a("input",{id:"private-key",value:n.value.privateKey,onInput:t[0]||(t[0]=i=>y("privateKey",i.target.value)),type:c.value?"text":"password",placeholder:"YOUR_PRIVATE_KEY",class:d([r.INPUT_BASE,o.value.privateKey?r.INPUT_ERROR:r.INPUT_DEFAULT]),"aria-invalid":!!o.value.privateKey,"aria-describedby":o.value.privateKey?"private-key-error":void 0},null,42,j),a("button",{type:"button",onClick:t[1]||(t[1]=i=>c.value=!c.value),class:"absolute right-2.5 top-1/2 -translate-y-1/2 p-1 text-nord-text-primary/70 hover:text-nord-text-primary transition-colors outline-none","aria-label":c.value?"Hide private key":"Show private key"},[U(S,{name:c.value?"eye":"eyeOff",class:"w-4 h-4"},null,8,["name"])],8,Y)]),o.value.privateKey?(u(),v("p",$,p(o.value.privateKey),1)):f("",!0)]),a("div",q,[t[6]||(t[6]=a("label",{for:"dns",class:"block text-sm font-medium text-nord-text-primary"},"DNS",-1)),a("input",{id:"dns",value:n.value.dns,onInput:t[2]||(t[2]=i=>y("dns",i.target.value)),type:"text",placeholder:`${g.defaultConfig.dns} (e.g., 103.86.96.100, 8.8.8.8)`,class:d([r.INPUT_BASE,o.value.dns?r.INPUT_ERROR:r.INPUT_DEFAULT]),"aria-invalid":!!o.value.dns,"aria-describedby":o.value.dns?"dns-error":void 0},null,42,H),o.value.dns?(u(),v("p",X,p(o.value.dns),1)):f("",!0)]),a("div",G,[t[7]||(t[7]=a("label",{for:"endpoint",class:"block text-sm font-medium text-nord-text-primary"},"Endpoint Type",-1)),O(a("select",{id:"endpoint","onUpdate:modelValue":t[3]||(t[3]=i=>n.value.endpoint=i),class:d([r.INPUT_BASE,r.INPUT_DEFAULT,"appearance-none cursor-pointer"])},[(u(),v(w,null,V(h,i=>a("option",{key:i.value,value:i.value},p(i.label),9,J)),64))],2),[[B,n.value.endpoint]])]),a("div",Q,[a("label",W,"Keepalive ("+p(b(s).KEEPALIVE.MIN)+"-"+p(b(s).KEEPALIVE.MAX)+" seconds)",1),a("input",{id:"keepalive",value:n.value.keepalive,onInput:t[4]||(t[4]=i=>y("keepalive",i.target.value)),type:"number",min:b(s).KEEPALIVE.MIN,max:b(s).KEEPALIVE.MAX,placeholder:g.defaultConfig.keepalive.toString(),class:d([r.INPUT_BASE,o.value.keepalive?r.INPUT_ERROR:r.INPUT_DEFAULT,"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"]),"aria-invalid":!!o.value.keepalive,"aria-describedby":o.value.keepalive?"keepalive-error":void 0},null,42,Z),o.value.keepalive?(u(),v("p",ee,p(o.value.keepalive),1)):f("",!0)])]),a("div",te,[a("div",ae,[a("button",{type:"submit",disabled:!m.value,class:d([r.BUTTON_BASE,"text-white",m.value?"bg-nord-button-primary hover:bg-nord-button-primary-hover focus:ring-2 focus:ring-nord-ring-primary/50":"bg-nord-button-primary/40 cursor-not-allowed"]),"aria-label":"Save configuration"},"Save",10,oe),a("button",{type:"button",onClick:A,class:d([r.BUTTON_BASE,"border border-nord-button-secondary hover:bg-nord-bg-hover focus:ring-2 focus:ring-nord-ring-secondary/50"]),"aria-label":"Cancel changes"},"Cancel",2),T.value?(u(),v("button",{key:0,type:"button",onClick:P,class:d([r.BUTTON_BASE,"border border-nord-button-secondary hover:bg-nord-bg-hover text-nord-text-secondary focus:ring-2 focus:ring-nord-ring-secondary/50"]),"aria-label":"Reset to default values"},"Reset",2)):f("",!0)])])],32)]))}};export{ie as default};
